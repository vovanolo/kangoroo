{"version":3,"file":"static/js/47.43dba5e8.chunk.js","mappings":"sQASe,SAASA,IACtB,IAAQC,GAAUC,EAAAA,EAAAA,IAAaC,EAAAA,GAAvBF,MACFG,GAAYC,EAAAA,EAAAA,QAAO,MACzB,GAAwBC,EAAAA,EAAAA,UAAS,MAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAAkCF,EAAAA,EAAAA,UAAS,IAA3C,eAAOG,EAAP,KAAkBC,EAAlB,KACA,GAAgCJ,EAAAA,EAAAA,WAAS,GAAzC,eAAOK,EAAP,KAAkBC,EAAlB,KAyCA,OAvCAC,EAAAA,EAAAA,YAAU,WAQR,OAPAD,GAAW,IACXE,EAAAA,EAAAA,MACGC,MAAK,SAACC,GACLN,EAAaM,EACd,IACAC,OAAM,SAACC,GAAD,OAASC,MAAMD,EAAIE,QAAnB,IACNC,SAAQ,kBAAMT,GAAW,EAAjB,IACJ,WACLF,EAAa,IACbE,GAAW,EACZ,CACF,GAAE,KAEHC,EAAAA,EAAAA,YAAU,WACJN,IACF,uBAAC,oGACOe,EAAAA,EAAAA,IAAYf,GAAM,SAACgB,GAAD,OACtBb,GAAa,SAACc,GAAD,OAAWD,GAAX,eAA4BC,GAA5B,GADS,IADzB,0CAAD,EAMH,GAAE,CAACjB,KAkBF,iBAAKkB,UAAU,4CAAf,WACE,kBACEC,IAAKtB,EACLqB,UAAU,SACVE,KAAK,OACLC,OAAO,UACPC,SAAU,SAACC,GAAD,OAAOtB,EAAQsB,EAAEC,OAAOC,MAAM,GAA9B,KAEZ,mBACEP,UAAU,qEACVQ,QAAS,kBAAM7B,EAAU8B,QAAQC,OAAxB,EAFX,gCAMCxB,IAAa,SAAC,IAAD,KACd,gBAAKc,UAAU,8DAAf,UACId,GACAF,GACAA,EAAU2B,KAAI,SAACC,EAAKC,GAAN,OACZ,iBAAiBb,UAAU,WAA3B,WACE,gBAAiBA,UAAU,YAA3B,UACE,gBACEc,MAAO,CAAEC,UAAW,IAAKC,SAAU,KACnCC,IAAKL,EACLM,IAAKN,EACLZ,UAAU,wCALJa,GASTrC,IACC,gBAAKwB,UAAU,uEAAf,UACE,mBAAQQ,QAAS,kBA/CZW,EA+C8BP,EA9CjDzB,GAAW,QACXiC,EAAAA,EAAAA,IAAuBD,GAAS,SAACA,GAAD,OAC9BlC,GAAa,SAACc,GAAD,OAAUA,EAAKsB,QAAO,SAACT,GAAD,OAASA,IAAQO,CAAjB,GAAtB,GADiB,IAG7B7B,MAAK,SAACgC,GAAD,OAASA,CAAT,IACL9B,OAAM,SAACC,GACN8B,QAAQC,IAAI/B,EACb,IACAG,SAAQ,WACPT,GAAW,GACXO,MAAM,UACP,IAZL,IAAqByB,CA+CY,EAAjB,UACE,SAAC,MAAD,CAAaM,KAAM,WAbjBZ,EADE,QAuBvB,C","sources":["pages/AdminPage/Tabs/GalleryTab.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { useAtomValue } from \"jotai\";\r\n\r\nimport { BsTrashFill } from \"react-icons/bs\";\r\n\r\nimport { authStorage } from \"../../../config/jotai\";\r\nimport Loader from \"../../../components/Loader/Loader\";\r\nimport { getGallery, deleteImageFromGallery, uploadImage } from \"../../../api\";\r\n\r\nexport default function GalleryTab() {\r\n  const { token } = useAtomValue(authStorage);\r\n  const uploadRef = useRef(null);\r\n  const [file, setFile] = useState(null);\r\n  const [gallaries, setGallaries] = useState([]);\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getGallery()\r\n      .then((data) => {\r\n        setGallaries(data);\r\n      })\r\n      .catch((err) => alert(err.message))\r\n      .finally(() => setLoading(false));\r\n    return () => {\r\n      setGallaries([]);\r\n      setLoading(false);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (file) {\r\n      (async () => {\r\n        await uploadImage(file, (convertedURL) =>\r\n          setGallaries((prev) => [convertedURL, ...prev])\r\n        );\r\n      })();\r\n    }\r\n  }, [file]);\r\n\r\n  function deleteImage(imageId) {\r\n    setLoading(true);\r\n    deleteImageFromGallery(imageId, (imageId) =>\r\n      setGallaries((prev) => prev.filter((url) => url !== imageId))\r\n    )\r\n      .then((res) => res)\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n        alert(\"DELETED\");\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center\">\r\n      <input\r\n        ref={uploadRef}\r\n        className=\"hidden\"\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={(e) => setFile(e.target.files[0])}\r\n      />\r\n      <button\r\n        className=\"px-8 py-4 bg-blue-300 hover:bg-blue-400 text-2xl transition-colors\"\r\n        onClick={() => uploadRef.current.click()}\r\n      >\r\n        Upload A New Image\r\n      </button>\r\n      {isLoading && <Loader />}\r\n      <div className=\"flex flex-wrap justify-center gap-8 container mx-auto mt-10\">\r\n        {!isLoading &&\r\n          gallaries &&\r\n          gallaries.map((url, index) => (\r\n            <div key={index} className=\"relative\">\r\n              <div key={index} className=\"max-w-3xl\">\r\n                <img\r\n                  style={{ maxHeight: 300, maxWidth: 400 }}\r\n                  src={url}\r\n                  alt={url}\r\n                  className=\"w-full h-full object-cover visible\"\r\n                />\r\n              </div>\r\n\r\n              {token && (\r\n                <div className=\"absolute top-0 right-0 flex gap-4 items-center bg-gray-200 px-4 py-2\">\r\n                  <button onClick={() => deleteImage(url)}>\r\n                    <BsTrashFill size={24} />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["GalleryTab","token","useAtomValue","authStorage","uploadRef","useRef","useState","file","setFile","gallaries","setGallaries","isLoading","setLoading","useEffect","getGallery","then","data","catch","err","alert","message","finally","uploadImage","convertedURL","prev","className","ref","type","accept","onChange","e","target","files","onClick","current","click","map","url","index","style","maxHeight","maxWidth","src","alt","imageId","deleteImageFromGallery","filter","res","console","log","size"],"sourceRoot":""}